<html class="loading" lang="en" data-textdirection="ltr" xmlns:th="https://www.thymeleaf.org/">
<head th:replace="includes/admin/header :: header"  />
<link th:href="@{../public/app-assets/vendors/css/ui/jquery-ui.min.css}" rel="stylesheet" type="text/css" />
<link th:href="@{../public/assets/css/MonthPicker.min.css}" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" th:href="@{../public/app-assets/css/plugins/loaders/loaders.min.css}">
<link rel="stylesheet" type="text/css" th:href="@{../public/app-assets/css/core/colors/palette-loader.css}">
<link rel="stylesheet" type="text/css" th:href="@{../public/app-assets/vendors/css/extensions/toastr.css}">
<link rel="stylesheet" type="text/css" th:href="@{../public/app-assets/css/plugins/extensions/toastr.css}">
<body class="vertical-layout vertical-menu 2-columns   menu-expanded fixed-navbar" data-open="click" data-menu="vertical-menu" data-col="2-columns">

<!-- fixed-top-->
<div th:replace="includes/user/topbar :: topbar"  />

<!-- query String -->
<!-- ////////////////////////////////////////////////////////////////////////////-->

<div th:replace="includes/user/navbar :: navbar" />

</div>
<div class="app-content content">
	<div class="content-wrapper">
		<div class="content-header row">
		</div>

		<div class="content-body"><!-- Analytics charts -->
			<div class="row">
				<div class="col-12">
					<div class="card">
						<div class="card-content">
							<div class="card-body">

								<div class="card-header">

									<!--<div class="loader-container">
                                        <div class="ball-pulse loader-primary">
                                            <div></div>
                                            <div></div>
                                            <div></div>
                                        </div>
                                    </div>-->
									<h4 class="form-section"><i class="fa fa-user"></i> Edit User</h4>
									<div class="heading-elements">
										<ul class="list-inline mb-0">
											<!--<li><a data-action="collapse"><i class="ft-minus"></i></a></li>
                                            <li><a data-action="reload"><i class="ft-rotate-cw"></i></a></li>-->
											<li><a data-action="expand"><i class="ft-maximize"></i></a></li>
											<!--<li><a data-action="close"><i class="ft-x"></i></a></li>-->
										</ul>
									</div>
								</div>

								<div class="card-content collpase show">
									<div class="card-body">
										<form action="" method="POST" id="addUserForm">
											<input type="hidden" name="id" th:value="${user.getId()}" id="id"/>
											<!--<div class="row form-group">
                                                <label  class="col-sm-4" >First Name</label >
                                                <div class="col-sm-5"><input type="text" name="firstName" id="firstName" class="form-control" /></div >
                                            </div >
                                            <div class="row form-group">
                                                <label  class="col-sm-4" >Last Name</label >
                                                <div class="col-sm-5"><input type="text" name="lastName" id="lastName" class="form-control" /></div >
                                            </div >
                                            <div class="row form-group">
                                                <label  class="col-sm-4" >Email</label >
                                                <div class="col-sm-5"><input type="email" name="email" id="email" class="form-control" /></div >
                                            </div >-->
											<div class="row form-group">
												<label  class="col-sm-4" >Username</label >
												<div class="col-sm-5"><input type="text" name="username" th:value=${user.getUsername()} id="username" class="form-control" /></div >
											</div >
											<!--<div class="row form-group">
												<label  class="col-sm-4" >Password</label >
												<div class="col-sm-5"><input type="password" name="password" id="password" class="form-control" /></div >
											</div >-->

											<div class="row form-group">
												<label  class="col-sm-4" >Role</label >
												<div class="col-sm-5">
													<select class="form-control" name="role" id="role">
														<option value="">Select Role</option>
														<option value="ROLE_ADMIN" th:selected="${(userRoles.getRoleId() ==2) ? 'selected':''}">Admin</option>
														<option value="ROLE_USERS" th:selected="${(userRoles.getRoleId() ==1) ? 'selected':''}">User</option>

													</select >
												</div >
											</div >


											<div class="row form-group">
												<label  class="col-sm-4" >Modules</label >
												<div class="col-sm-5">
													<select class="form-control select2" name="modules" id="modules" multiple="multiple">
														<option value="">Select Modules</option>
														<option value="INDICATOR" th:selected='${(userRoles.getModules().indexOf("INDICATOR") > -1) ? "selected":"" }'>INDICATOR</option>
														<option value="SERVICE_DELIVERY" th:selected="${(userRoles.getModules().indexOf('SERVICE_DELIVERY') > -1) ? 'selected':'' }">SERVICE_DELIVERY</option>
														<option value="POLICY" th:selected="${(userRoles.getModules().indexOf('POLICY') > -1) ? 'selected':'' }">POLICY</option>
														<option value="MEDICATION_TECHNOLOGY" th:selected="${(userRoles.getModules().indexOf('MEDICATION_TECHNOLOGY') > -1) ? 'selected':'' }">MEDICATION_TECHNOLOGY</option>
														<option value="EDUCATION" th:selected="${(userRoles.getModules().indexOf('EDUCATION') > -1) ? 'selected':'' }">EDUCATION</option>
														<option value="AFRICAN_PALLIATIVE_CARE" th:selected="${(userRoles.getModules().indexOf('AFRICAN_PALLIATIVE_CARE') > -1) ? 'selected':'' }">AFRICAN_PALLIATIVE_CARE</option>
														<option value="AGENDA_FOR_PC" th:selected="${(userRoles.getModules().indexOf('AGENDA_FOR_PC') > -1) ? 'selected':'' }">AGENDA_FOR_PC</option>
														<option value="KNOWLEDGE_PALLIATIVE_CARE" th:selected="${(userRoles.getModules().indexOf('KNOWLEDGE_PALLIATIVE_CARE') > -1) ? 'selected':'' }">KNOWLEDGE_PALLIATIVE_CARE</option>
														<option value="WEB_BASE_PCC_LEARNING_HOUSE" th:selected="${(userRoles.getModules().indexOf('WEB_BASE_PCC_LEARNING_HOUSE') > -1) ? 'selected':'' }">WEB_BASE_PCC_LEARNING_HOUSE</option>
														<option value="DATA_DEMAND_INFORMATION_USE" th:selected="${(userRoles.getModules().indexOf('DATA_DEMAND_INFORMATION_USE') > -1) ? 'selected':'' }">DATA_DEMAND_INFORMATION_USE</option>
														<option value="MANAGEMENT_LEADERSHIP_FRAMEWORK" th:selected="${(userRoles.getModules().indexOf('MANAGEMENT_LEADERSHIP_FRAMEWORK') > -1) ? 'selected':'' }">MANAGEMENT_LEADERSHIP_FRAMEWORK</option>
														<option value="HUMAN_RESOURCE_MANAGEMENT_DEVELOPMENT" th:selected="${(userRoles.getModules().indexOf('HUMAN_RESOURCE_MANAGEMENT_DEVELOPMENT') > -1) ? 'selected':'' }">HUMAN_RESOURCE_MANAGEMENT_DEVELOPMENT</option>
														<option value="PARTNERSHIP_POLICY_STRATEGY" th:selected="${(userRoles.getModules().indexOf('PARTNERSHIP_POLICY_STRATEGY') > -1) ? 'selected':'' }">PARTNERSHIP_POLICY_STRATEGY</option>
														<option value="DEVELOP_SUSTAINABLE_FINANCE_FRAMEWORK" th:selected="${(userRoles.getModules().indexOf('DEVELOP_SUSTAINABLE_FINANCE_FRAMEWORK') > -1) ? 'selected':'' }">DEVELOP_SUSTAINABLE_FINANCE_FRAMEWORK</option>

													</select >
												</div >
											</div >

											<div class="row form-group">
												<label  class="col-sm-4" >Select Country</label >
												<div class="col-sm-5">
													<select class="form-control select2" id="countryId" name="countryId" multiple="multiple">
														<option value="">Select country</option>
														<th:block th:each="country : ${countries}">
															<option th:value="${country.get('code')}" th:selected="${userRoles.getCountries().indexOf(country.get('code'))> -1 ? 'selected': ''}" th:text="${country.get('name')}"></option>
														</th:block>
													</select >
												</div >
											</div >


											<div class="row form-group">
												<div class="col-sm-12 col-md-9">
													<a id="addUser" href="javascript:void(0);" class="btn btn-success pull-right"> Add User</a>
												</div >
											</div >
										</form>


									</div>


								</div>
							</div>
						</div>
					</div>
				</div>
				<!--/ Analytics charts -->


				<!-- Analytics map based session -->

				<!-- Bounce Rate & Mobile Device View -->

				<!-- Audience by country -->
				<!--  -->

			</div>
		</div>
		<div th:replace="includes/user/footer :: footer"  />
	</div>
	<!-- ////////////////////////////////////////////////////////////////////////////-->

	<script th:src="@{./public/app-assets/js/scripts/extensions/toastr.js}" type="text/javascript"></script>
	<script th:src="@{../public/app-assets/vendors/js/extensions/toastr.min.js}"></script>
	<script th:src="@{../public/assets/js/saveScript.js}" type="text/javascript"></script>
	<script type="text/javascript" th:src="@{../public/assets/js/jquery.validate.min.js}"></script>
	<script type="text/javascript" th:src="@{../public/app-assets/vendors/js/ui/jquery-ui.min.js}"></script>
	<script type="text/javascript" th:src="@{../public/assets/js/validationScript.js}"></script>
	<script type="text/javascript" th:src="@{../public/assets/js/MonthPicker.js}"></script>
	<script type="text/javascript" th:src="@{../public/assets/js/homeScript.js}"></script>
	<script type="text/javascript" th:src="@{../public/assets/js/miscScript.js}"></script>
	<script type="text/javascript">
		var periodType = "monthly";
		$(document).ready(function(e){
			validateAddUser();
			getStates();

			$('#reportingPeriod').MonthPicker({ Button: false,callback:function(){
					getLocalData();
				} });
			//validateAddProviderCategory();

			$("#role").change(function(){
				var value = $(this).val();

				$(".privilegeArea").addClass("hidden");
				$("#"+value+"Div").removeClass("hidden");

				//we need to add some more items to the validation and remove others
				updateAddUserValidation(value);
			})
		})

		function updateAddUserValidation(selectedRole)
		{
			$("#stateId").rules("remove");
			$("#lgaId").rules("remove");
			$("#facilityId").rules("remove");
			$("#spokeId").rules("remove");
			$("#ipId").rules("remove");
			$('#'+selectedRole+"Id").rules('add', {
				required: true,
				messages: {
					required: "Please select "+selectedRole,
				}
			});


		}
	</script>
</body>
</html>