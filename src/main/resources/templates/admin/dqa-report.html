<html class="loading" lang="en" data-textdirection="ltr" xmlns:th="https://www.thymeleaf.org/">
	<head th:replace="includes/admin/header :: header"  /> 
	<link th:href="@{../public/app-assets/vendors/css/ui/jquery-ui.min.css}" rel="stylesheet" type="text/css" />
	<link th:href="@{../public/assets/css/MonthPicker.min.css}" rel="stylesheet" type="text/css" />
	 <link rel="stylesheet" type="text/css" th:href="@{../public/app-assets/css/plugins/loaders/loaders.min.css}">
    <link rel="stylesheet" type="text/css" th:href="@{../public/app-assets/css/core/colors/palette-loader.css}">
    <link rel="stylesheet" type="text/css" th:href="@{../public/app-assets/vendors/css/extensions/toastr.css}">
    <link rel="stylesheet" type="text/css" th:href="@{../public/app-assets/css/plugins/extensions/toastr.css}">
      <link rel="stylesheet" type="text/css" th:href="@{../public/app-assets/vendors/css/tables/datatable/datatables.min.css}">
  <body class="vertical-layout vertical-menu 2-columns   menu-expanded fixed-navbar" data-open="click" data-menu="vertical-menu" data-col="2-columns">

    <!-- fixed-top-->
	<div th:replace="includes/admin/topbar :: topbar"  /> 

<!-- query String -->
    <!-- ////////////////////////////////////////////////////////////////////////////-->
 


        <div th:replace="includes/admin/navbar :: navbar"  /> 
        
        </div>
     <div class="app-content content">
      <div class="content-wrapper">
        <div class="content-header row">
        </div>

        <div class="content-body"><!-- Analytics charts -->
            <div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-content">
                <class="card-body">
                  
	            <div class="card-header">
                   
		        	
	                <h4 class="form-section"><i class="fa fa-linode"></i> DQA Report</h4>
        			<div class="heading-elements">
	                    <ul class="list-inline mb-0">
	                        <!--<li><a data-action="collapse"><i class="ft-minus"></i></a></li>
	                        <li><a data-action="reload"><i class="ft-rotate-cw"></i></a></li>-->
	                        <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
	                        <!--<li><a data-action="close"><i class="ft-x"></i></a></li>-->
	                    </ul>
	                </div>
                </div>
                
                
               	<form action="" method="GET" style="margin-left:10px; margin-right:10px;">
               	 	<!--<div class="row" style="margin-bottom:10px;">
               	 		
               	 		<label class="col-sm-3 col-md-1 ">Report Type</label >
	          			<div class="col-sm-3 col-md-2">
			          		<select class="form-control" name="periodType" id="periodType">
			            		<option value="">Select Type</option>
			            		<option value="weekly" th:selected="${periodType.equalsIgnoreCase('weekly')}" >Weekly</option>
			            		<option value="monthly" th:selected="${periodType.equalsIgnoreCase('monthly')}" >Monthly</option>
			            	</select >
			            </div >
				        <label class="col-sm-3 col-md-1 ">State</label >
	          			<div class="col-sm-3 col-md-2">
			          		<select class="form-control select2" name="stateId" id="stateId">
			          			
			            		<option value="">Select State</option>
			            		<th:block th:each="state : ${states}">
			          				<option th:value="${state.get('stateCode')}" th:text="${state.get('name')}" th:selected="${stateId == misc.getIntVal(state.get('stateCode'))}"></option>
			          			</th:block>
			            	</select >
			            </div >
			            <label class="col-sm-3 col-md-1 ">LGA</label >
	          			<div class="col-sm-3 col-md-2">
			          		<select class="form-control select2" name="lgaId" id="lgaId">
			          			
			            		<option value="">Select LGA</option>
			            		
			            	</select >
			            </div >
			            <label class="col-sm-3 col-md-1 ">Facility</label >
	          			<div class="col-sm-3 col-md-2">
			          		<select class="form-control select2" name="facilityId" id="facilityId">
			            		<option value="">Select Facility</option>
			            	</select >
			            </div >
			            
               	 	
			            
               	 	</div>
               	 	
               	 	<div class="row" id="weeklyPeriod" th:classappend="${periodType.equalsIgnoreCase('weekly')} ? '' : 'hidden'" >
	                	<label class="col-md-1 col-sm-3">Start Period</label>
	                	<div class="col-md-2 col-sm-3">
	                		<input type="text" id="startPeriodWeekly" class="form-control"  name="startDateW"/>
	                	</div >
	                	<br/>
	                	<label class="col-md-1 col-sm-3">End Period</label>
	                	<div class=" col-md-2 col-sm-3">
	                		<input type="text" id="endPeriodWeekly" class="form-control"  name="endDateW"/>
	                	</div >
	                </div >
	                
	               -->
               	</form >
	            <div class="card-content collpase show">
	                <div class="card-body">
                    	
	                    <div class="table-responsive">
	                     
                             <table class="table table-bordered datatable" id="file-export">
                                <thead class="bg-info white">
                                    <tr>
                                        <th>S/N</th>
                                       	<th>IP</th>
                                       	<th>State</th>
                                       	<th>LGA</th>
                                        <th>Facility</th>
                                        <th>Patient ID</th>
                                        <th>Hospital No.</th>
                                        <th>Sex</th>
                                        <th>Cohort</th>
                                        <th>Reached on phone</th>
                                        <th>Consent to Participate</th>
                                        <th>First time tested Positive</th>
                                        <th>Facility/Location client  tested Positive for the first time</th>
                                        <th>Ever tested for HIV again since the first time?</th>
                                        <th>No. of times tested for HIV since very first time tested Positive</th>
                                        <th>Last Time Tested for HIV</th>
                                        <th>Reasons for Having Another HIV test</th>
                                        <th>Reasons for Having Another HIV test(Others)</th>
                                        <th>Ever Take ARV ?</th>
                                        <th>Duration if Yes</th>
                                        <th>Date Started ARV for the First Time</th>
                                        <th>Facility/location client received ARV for the first time</th>
                                        <th>Date First Received ARV from this facility</th>
                                        <th>Date Last  Received ARV from this facility</th>
                                        <th>How Many Months of Drugs was last received?</th>
                                        <th>Last time of Blood Draw for VL Test</th>
                                        <th>Have you ever received drug at any other location?</th>
                                        <th>Reason for receiving drug at any other location?</th>
                                        <th>Still receiving drug at any other location? (Y/N)</th>	 
                                        <th>Reason for still receiving drug at any other location?</th>
                                        <th>Remarks</th>
                                        <th>Created By</th>
                                        <th>Date Created</th>
                                        
                                    </tr>
                                </thead>
                                <tbody>
                                	 <tr th:each="datum : ${data}">
                                    	<td> </td>
                                        <td th:text="${datum.get('ip')}"></td >
                                          <td th:text="${datum.get('state')}"></td >
                                          <td th:text="${datum.get('lga')}"></td >
                                          <td th:text="${datum.get('facility')}"></td >
                                          <td th:text="${datum.get('patientId')}"></td >
                                          <td th:text="${datum.get('hospitalNo')}"></td >
                                          <td th:text="${datum.get('gender')}"></td >
                                          <td th:text="${datum.get('cohort')}"></td >
                                          <td th:text="${datum.get('reasonForNoInterview')}"></td >
                                          <td th:text="${datum.get('consentGiven')}"></td >
                                          <td th:text="${datum.get('firstTimeTestedPositive')}"></td >
                                          <td th:text="${datum.get('locationTestedPositiveFirstTime')}"></td >
                                          <td th:text="${datum.get('hasRetested')}"></td >
                                          <td th:text="${datum.get('noTimesRetested')}"></td >
                                          <td th:text="${datum.get('lastRetest')}"></td >
                                          <td th:text="${datum.get('retestReason')}"></td >
                                          <td th:text="${datum.get('otherRetestReason')}"></td >
                                          
                                          
                                          <td th:text="${datum.get('clientTookArv')}"></td >
                                          <td th:text="${datum.get('arvDuration')}"></td >
                                          <td th:text="${datum.get('whenDidClientStartTreatment')}"></td >
                                          <td th:text="${datum.get('locationStartedMedication')}"></td >
                                          
                                          <td th:text="${datum.get('firstDrugPickup')}"></td >
                                          <td th:text="${datum.get('lastDrugPickup')}"></td >
                                          <td th:text="${datum.get('refillDays')}"></td >
                                          <td th:text="${datum.get('lastViralLoad')}"></td >
                                          <td th:text="${datum.get('recievedTxFromAnother')}"></td >
                                          <td th:text="${datum.get('otherFacReason')}"></td >
                                          <td th:text="${datum.get('receivingFromAnotherFac')}"></td >
                                          <td th:text="${datum.get('receivingFromAnotherReason')}"></td >
                                          <td th:text="${datum.get('otherRemarks')}"></td >
                                          <td th:text="${datum.get('username')}"></td >
                                          <td th:text="${datum.get('dateCreated')}"></td >
                                          
                                          
                                    </tr >
                                </tbody>
                            </table>
	                	</div>
		                
		            </div>
		            
		      
                </div>
            </div>
        </div>
    </div>
</div>
<!--/ Analytics charts -->


<!-- Analytics map based session -->

<!-- Bounce Rate & Mobile Device View -->

<!-- Audience by country -->
<!--  -->

        </div>
      </div>
      <div th:replace="includes/admin/footer :: footer"  /> 
    </div>
    <!-- ////////////////////////////////////////////////////////////////////////////-->

	<script th:src="@{../public/app-assets/js/scripts/extensions/toastr.js}" type="text/javascript"></script>
	<script th:src="@{../public/app-assets/vendors/js/extensions/toastr.min.js}"></script>
	<script th:src="@{../public/assets/js/saveScript.js}" type="text/javascript"></script>
	
	<script th:src="@{../public/app-assets/vendors/js/tables/datatable/datatables.min.js}"></script>
    <script th:src="@{../public/app-assets/vendors/js/tables/datatable/dataTables.buttons.min.js}"></script>
    <script th:src="@{../public/app-assets/vendors/js/tables/buttons.flash.min.js}"></script>
    <script th:src="@{../public/app-assets/vendors/js/tables/jszip.min.js}"></script>
    <script th:src="@{../public/app-assets/vendors/js/tables/pdfmake.min.js}"></script>
    <script th:src="@{../public/app-assets/vendors/js/tables/vfs_fonts.js}"></script>
    <script th:src="@{../public/app-assets/vendors/js/tables/buttons.html5.min.js}"></script>
    <script th:src="@{../public/app-assets/vendors/js/tables/buttons.print.min.js}"></script>
    
	<script type="text/javascript" th:src="@{../public/assets/js/jquery.validate.min.js}"></script>
	<script type="text/javascript" th:src="@{../public/app-assets/vendors/js/ui/jquery-ui.min.js}"></script>
	<script type="text/javascript" th:src="@{../public/assets/js/validationScript.js}"></script>
	<script type="text/javascript" th:src="@{../public/assets/js/MonthPicker.js}"></script>
	<script type="text/javascript" th:src="@{../public/assets/js/homeScript.js}"></script>
	<script type="text/javascript" th:src="@{../public/assets/js/miscScript.js}"></script>
	<script type="text/javascript" th:src="@{../public/assets/js/weekPicker.js}"></script>
	<script type="text/javascript" th:src="@{../public/assets/js/MonthPicker.js}"></script>
	<script th:inline="javascript">
	/*<![CDATA[*/
	
	    var stateId = /*[[${stateId}]]*/ '';
	    var selLgadId = /*[[${lgaId}]]*/ '';
	    var selFacilityId = /*[[${facilityId}]]*/ '';
	    var selSpokeId = /*[[${spokeId}]]*/ '';
	/*]]>*/
	</script>
	<script type="text/javascript">
		var periodType = "monthly";
		$(document).ready(function(e){
			
			
			$("#periodType").change(function(){
				var periodType = $(this).val();
				
				if(periodType == "weekly")
				{	
					$("#weeklyPeriod").removeClass("hidden");
					$("#monthlyPeriod").addClass("hidden");
				}
				else if(periodType == "monthly"){
					$("#weeklyPeriod").addClass("hidden");
					$("#monthlyPeriod").removeClass("hidden");
				}
				else{
					$("#weeklyPeriod").addClass("hidden");
					$("#monthlyPeriod").addClass("hidden");
				}
			})	
          $('#reportingPeriod').MonthPicker({ Button: false,callback:function(){ 
					getLocalData();
				} });
				
			$("#stateId").change();
				
				
				$('#file-export').DataTable({
			        //dom: 'Bfrtip', this has search i.e the f flag
			        dom: 'Bfrtip',
			       
			        "pageLength": 100,
			        buttons: [
			            'copy', 'csv', 'excel', 'pdf', 'print'
			        ]
			    });
			    $('.buttons-copy, .buttons-csv, .buttons-print, .buttons-pdf, .buttons-excel').addClass('btn btn-info mr-1');
			    
			    
	
			    convertToWeekPicker($("#startPeriodWeekly"), false, function(data){
				
			})
			convertToWeekPicker($("#endPeriodWeekly"), false, function(data){
				
			})
			
			$('#startPeriodMonthly').MonthPicker({ Button: false,callback:function(){ 
					
				} });
			$('#endPeriodMonthly').MonthPicker({ Button: false,callback:function(){ 
					
				} })
					//validateAddProviderCategory();
		})
	</script>
  </body>
</html>